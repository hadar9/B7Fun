
{% extends 'baseWithNav.html' %}

{% block extra_assets_end %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
{% endblock  %}

{%block content%}
<div class="container d-flex flex-column h-100 flex-wrap">
    <div class="flex-grow-1"></div>
    <div class="row justify-content-center mt-1 p-1">
        <div class="col-10 bg-light">
            <canvas id="sign_ups_chart"></canvas>
        </div>
    </div>
    <div class="flex-grow-1"></div>       
</div>

{{ labels|json_script:"labels" }}
{{ sign_ups|json_script:"sign_ups" }}
{{ graph_sign_up_title|json_script:"graph_sign_up_title" }}
<script>
    const labels = JSON.parse(document.getElementById('labels').textContent);
    const sign_ups = JSON.parse(document.getElementById('sign_ups').textContent);
    const graph_sign_up_title = JSON.parse(document.getElementById('graph_sign_up_title').textContent);

    window.onload = function(){
        $( document ).ready(function() {
            var ctx = document.getElementById('sign_ups_chart').getContext('2d');
            var sigh_ups_chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'bar',

                // The data for our dataset
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Number of sign ups',
                        backgroundColor: 'rgb(255, 99, 132)',
                        borderColor: 'rgb(255, 99, 132)',
                        data: sign_ups
                    }]
                },

                // Configuration options go here
                options: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: graph_sign_up_title
                    }
                }
            });
        });
    };
</script>
{% endblock  %}